<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: modules/home/home.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: modules/home/home.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>﻿'use strict';

angular.module('myApp').controller('HomeCtrl', function($scope, $location, $route, $filter, Operation, Global, Translation, Export) {
    
    Translation.getTranslation($scope);

    $scope.createOperation = function() {
        navigator.notification.prompt(
            $scope.translation.home.newOpName,
            function(results) {
                if(results.buttonIndex == 1 &amp;&amp; results.input1){
                    console.log('Création d\'une nouvelle opération');
                    Operation.createOperation(results.input1);
                    $route.reload();
                }
            }, 
            $scope.translation.home.newOp,
            [$scope.translation.create, $scope.translation.cancel],
            $scope.translation.home.avalancheFrom + ' ' + $filter('date')(new Date(), $scope.translation.dateFormat)
        );
    }

    $scope.historique = function() {
        $location.url('historique');
    }

    /**
     * Vide le contenu du local storage
     */
    $scope.purgeStorage = function() {
        navigator.notification.prompt(
            $scope.translation.home.confirmDelete, 
            function(results) {
                if(results.buttonIndex == 1 &amp;&amp; results.input1.toLowerCase() == "supprimer") {
                    console.log('Purge all data !');
                    Global.purgeData();
                    // TODO : mettre une confirm pop-up
                } else {
                    console.log('Purge annulée')
                }
            }, 
            $scope.translation.home.deleteData,
            [$scope.translation.delete, $scope.translation.cancel]
        );
    }

    /**
     * Vide le contenu du localStorage et charge les données de démonstration de l'application
     */
    $scope.loadDemoData = function() {
        console.log('Chargement des données de test ...');
        navigator.notification.prompt(
            $scope.translation.home.confirmDemo, 
            function(results) {
                if(results.buttonIndex == 1 &amp;&amp; results.input1.toLowerCase() == "demo") {
                    console.log('Charger les données de démo !');
                    Global.purgeData();
                    Global.loadDemoData();
                    
                    // TODO : mettre une confirm pop-up
                } else {
                    console.log('Chargement données démo annulé !');
                }
            }, 
            $scope.translation.home.demoData,
            [$scope.translation.ok, $scope.translation.cancel]
        );
    }

    /**
     * Ferme l'application après avoir demandé la confirmation
     */
    $scope.exitApp = function(){
        Global.exitApp();
    }

    $scope.$on('dataFlushed', function(event) {
        navigator.notification.alert(
            $scope.translation.home.demoLoadSuccess,
            null,
            $scope.translation.home.demoMode,
            'OK'
        );
        $location.url('/dashboard');
    });

});
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#avalanche">avalanche</a></li><li><a href="global.html#exitApp">exitApp</a></li><li><a href="global.html#onDeviceReady">onDeviceReady</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Wed Feb 15 2017 14:30:37 GMT+0100 (Paris, Madrid)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
