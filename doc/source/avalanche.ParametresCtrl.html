<!doctype html><html>  <head>    <meta charset="utf-8">    <base href="../">    <title>JSDoc: source : parametres.js</title>    <link href="css/prettify-tomorrow.css" type="text/css" rel="stylesheet">    <link href="css/site.css" type="text/css" rel="stylesheet">  </head>  <body ng-app="">    <nav id="toc">      <input placeholder="Filter" id="filter-input" class="col12 block field" type="text">      <div class="nav-wrapper">      <h2><a href="index.html">Index</a></h2>      <ul class="module">        <!-- avalanche -->        <h2 class="module">          <a chref="" ng-click="moduleavalanche = !moduleavalanche">            module: avalanche          </a>          <i ng-cloak="" ng-show="moduleavalanche">+</i>        </h2>        <li id="avalanche" ng-hide="moduleavalanche">          <ul class="group">            <h2>              <a href="" ng-click="avalanchecontrollers = !avalanchecontrollers">                controllers              </a>              <i ng-cloak="" ng-show="avalanchecontrollers">+</i>            </h2>            <ul ng-hide="avalanchecontrollers">              <li>                <a href="avalanche.AddIntervenantCtrl.html">AddIntervenantCtrl</a>              </li><li>                <a href="avalanche.AddVictimeCtrl.html">AddVictimeCtrl</a>              </li><li>                <a href="avalanche.DashboardCtrl.html">DashboardCtrl</a>              </li><li>                <a href="avalanche.DetailsMetierCtrl.html">DetailsMetierCtrl</a>              </li><li>                <a href="avalanche.EditIntervenantCtrl.html">EditIntervenantCtrl</a>              </li><li>                <a href="avalanche.EditVictimeCtrl.html">EditVictimeCtrl</a>              </li><li>                <a href="avalanche.HistoriqueCtrl.html">HistoriqueCtrl</a>              </li><li>                <a href="avalanche.HomeCtrl.html">HomeCtrl</a>              </li><li>                <a href="avalanche.JournalCtrl.html">JournalCtrl</a>              </li><li>                <a href="avalanche.MenuCtrl.html">MenuCtrl</a>              </li><li>                <a href="avalanche.ParametresCtrl.html">ParametresCtrl</a>              </li>            </ul>          </ul><ul class="group">            <h2>              <a href="" ng-click="avalancheservices = !avalancheservices">                services              </a>              <i ng-cloak="" ng-show="avalancheservices">+</i>            </h2>            <ul ng-hide="avalancheservices">              <li>                <a href="avalanche.Export.html">Export</a>              </li><li>                <a href="avalanche.Global.html">Global</a>              </li><li>                <a href="avalanche.Operation.html">Operation</a>              </li><li>                <a href="avalanche.Parametres.html">Parametres</a>              </li><li>                <a href="avalanche.Translation.html">Translation</a>              </li>            </ul>          </ul><ul class="group">            <h2>              <a href="" ng-click="avalanchefilters = !avalanchefilters">                filters              </a>              <i ng-cloak="" ng-show="avalanchefilters">+</i>            </h2>            <ul ng-hide="avalanchefilters">              <li>                <a href="avalanche.lowerMetier.html">lowerMetier</a>              </li><li>                <a href="avalanche.plurielMetier.html">plurielMetier</a>              </li>            </ul>          </ul>        </li>      </ul>      </div>    </nav>    <div id="content" class="page-wrap">      <h1 class="title">        source : parametres.js      </h1>      <div id="main" class="big-container">        <!-- source code html -->        <article>          <pre class="prettyprint source linenums"><code>'use strict';/** * @ngdoc controllers * @memberof avalanche * @name ParametresCtrl */angular.module('myApp').controller('ParametresCtrl', function($rootScope, $scope, Parametres, Translation, Operation) {     /**      * Récupère les paramètres stockés localement      * @memberof ParametresCtrl      * @func init      */    function init() {        Translation.getTranslation($scope);        $scope.metiers = Parametres.getMetiers();        $scope.victimeStatus = Parametres.getVictimeStatus();        $scope.victimeSituation = Parametres.getVictimeSituations();        $scope.languages = Parametres.getLanguages();        $scope.language = Parametres.getCurrentLanguage();    }    init();    /**     * Met à jour le langage utilisé dans l'application     * @memberof ParametresCtrl     * @function changeLanguage     * @param {string} lang Langue choisie     */    $scope.changeLanguage = function(lang) {        Parametres.setLanguage(lang);    }    /**     * Met à jour l'identifiant du dernier metier cliqué     * @memberof ParametresCtrl     * @function updateLastClicked     * @param {string} index Index cliqué     */    $scope.updateLastClicked = function(index) {        $scope.lastClickedIndex = index;    }    /**     * Ajoute un metier dans les coprs de métiers disponibles pour les intervenants     * @memberof ParametresCtrl     * @function addMetier     * @param {string} color Couleur représentative du métier choisie     * @param {string} metier Nom du métier choisi     */    $scope.addMetier = function(color, metier) {        if (!metier){            navigator.notification.alert("Saisissez un intitulé de métier.");        }else{            Parametres.addMetier({libelle: metier, bg: color, text: '#000'});            $rootScope.Ui.turnOff('modalAddMetier')        }    }     /**     * Suuprime un metier parmi les corps de métiers disponibles pour les intervenants     * @memberof ParametresCtrl     * @function removeMetier     * @param {string} metier Nom du métier choisi     */    $scope.removeMetier = function(metier) {        // TODO : vérifier qu'il n'y a aucun intervenant pour ce métier dans l'opération courante        if (Operation.getPersonnelsByMetier(metier).length > 0){            navigator.notification.alert("Impossible de supprimer. \n Ce métier est encore utilisé dans l'opération", null, "Attention", "OK")        }else{            var i = 0;            while ($scope.metiers[i].libelle != metier && i&lt;$scope.metiers.length) i++;            if (i&lt;$scope.metiers.length)                Parametres.removeMetier($scope.metiers[i]);            else                 console.log("Ce métier n'existe pas dans la liste des métiers.");            Parametres.removeMetier(metier);        }    }        /**     * Modifie un metier parmis les coprs de métiers disponibles pour les intervenants     * @memberof ParametresCtrl     * @function modifyMetier     * @param {string} color Nouvelle couleur du métier modifié     * @param {string} metier Nouveau nom du corps de métier modifié     */    $scope.modifyMetier = function(color, metier) {        Parametres.modifyMetier({libelle: metier, bg: color, text: '#000' });    }    $scope.options = [        '#FFF', '#FFA773', '#FFD180', '#FFFF8D', '#CFD8DC', '#80D8FF',         '#A7FFEB', '#E969A8', '#6996D3', '#CCFF90', '#5FD2B5', '#FF8A80'    ];    $scope.$on('langUpdated', function(event) {        $scope.language = Parametres.getCurrentLanguage();        Translation.getTranslation($scope);    });    $scope.$on('metiersUpdated', function(event) {        $scope.metiers = Parametres.getMetiers();    });});</code></pre>        </article>        <!-- index.html -->        <!-- class files -->      </div>      <footer style="clear:both">        Documentation generated by        <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.2</a>        using        <a href="https://github.com/allenhwkim/angular-jsdoc">Angular-JSDoc template</a>      </footer>    </div>    <script src="js/prettify.js"></script>    <script src="js/angular.min.js"></script>    <script src="js/site.js"></script>    <!--%= prettyJson %-->    <script>      prettyPrint();      var lineNo = window.location.hash.match(/#line([0-9]+)$/);      lineNo && document.querySelector("ol li:nth-child("+(lineNo[1])+")").scrollIntoView();    </script>  </body></html>