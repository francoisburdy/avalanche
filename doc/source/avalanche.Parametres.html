<!doctype html><html>  <head>    <meta charset="utf-8">    <base href="../">    <title>JSDoc: source : parametres_service.js</title>    <link href="css/prettify-tomorrow.css" type="text/css" rel="stylesheet">    <link href="css/site.css" type="text/css" rel="stylesheet">  </head>  <body ng-app="">    <nav id="toc">      <input placeholder="Filter" id="filter-input" class="col12 block field" type="text">      <div class="nav-wrapper">      <h2><a href="index.html">Index</a></h2>      <ul class="module">        <!-- avalanche -->        <h2 class="module">          <a chref="" ng-click="moduleavalanche = !moduleavalanche">            module: avalanche          </a>          <i ng-cloak="" ng-show="moduleavalanche">+</i>        </h2>        <li id="avalanche" ng-hide="moduleavalanche">          <ul class="group">            <h2>              <a href="" ng-click="avalanchecontrollers = !avalanchecontrollers">                controllers              </a>              <i ng-cloak="" ng-show="avalanchecontrollers">+</i>            </h2>            <ul ng-hide="avalanchecontrollers">              <li>                <a href="avalanche.AddIntervenantCtrl.html">AddIntervenantCtrl</a>              </li><li>                <a href="avalanche.AddVictimeCtrl.html">AddVictimeCtrl</a>              </li><li>                <a href="avalanche.DashboardCtrl.html">DashboardCtrl</a>              </li><li>                <a href="avalanche.DetailsMetierCtrl.html">DetailsMetierCtrl</a>              </li><li>                <a href="avalanche.EditIntervenantCtrl.html">EditIntervenantCtrl</a>              </li><li>                <a href="avalanche.EditVictimeCtrl.html">EditVictimeCtrl</a>              </li><li>                <a href="avalanche.HistoriqueCtrl.html">HistoriqueCtrl</a>              </li><li>                <a href="avalanche.HomeCtrl.html">HomeCtrl</a>              </li><li>                <a href="avalanche.JournalCtrl.html">JournalCtrl</a>              </li><li>                <a href="avalanche.MenuCtrl.html">MenuCtrl</a>              </li><li>                <a href="avalanche.ParametresCtrl.html">ParametresCtrl</a>              </li>            </ul>          </ul><ul class="group">            <h2>              <a href="" ng-click="avalancheconfig = !avalancheconfig">                config              </a>              <i ng-cloak="" ng-show="avalancheconfig">+</i>            </h2>            <ul ng-hide="avalancheconfig">              <li>                <a href="avalanche.app.html">app</a>              </li><li>                <a href="avalanche.routes.html">routes</a>              </li>            </ul>          </ul><ul class="group">            <h2>              <a href="" ng-click="avalancheservices = !avalancheservices">                services              </a>              <i ng-cloak="" ng-show="avalancheservices">+</i>            </h2>            <ul ng-hide="avalancheservices">              <li>                <a href="avalanche.Export.html">Export</a>              </li><li>                <a href="avalanche.Global.html">Global</a>              </li><li>                <a href="avalanche.Operation.html">Operation</a>              </li><li>                <a href="avalanche.Parametres.html">Parametres</a>              </li><li>                <a href="avalanche.Translation.html">Translation</a>              </li>            </ul>          </ul><ul class="group">            <h2>              <a href="" ng-click="avalanchehelpers = !avalanchehelpers">                helpers              </a>              <i ng-cloak="" ng-show="avalanchehelpers">+</i>            </h2>            <ul ng-hide="avalanchehelpers">              <li>                <a href="avalanche.JS%20helpers.html">JS helpers</a>              </li>            </ul>          </ul><ul class="group">            <h2>              <a href="" ng-click="avalanchefilters = !avalanchefilters">                filters              </a>              <i ng-cloak="" ng-show="avalanchefilters">+</i>            </h2>            <ul ng-hide="avalanchefilters">              <li>                <a href="avalanche.lowerMetier.html">lowerMetier</a>              </li><li>                <a href="avalanche.plurielMetier.html">plurielMetier</a>              </li>            </ul>          </ul>        </li>      </ul>      </div>    </nav>    <div id="content" class="page-wrap">      <h1 class="title">        source : parametres_service.js      </h1>      <div id="main" class="big-container">        <!-- source code html -->        <article>          <pre class="prettyprint source linenums"><code>﻿'use strict';/** * @memberof avalanche * @ngdoc services * @name Parametres * @description  *   Service Parametres */angular.module('myApp').service('Parametres', function($localStorage, $rootScope) {    /************************     * STATUTS DES VICTIMES *     ***********************/     /**      * @memberof Parametres      * @func getVictimeStatus      */    this.getVictimeStatus = function() {        if(!$localStorage.victimeStatus) this.createDefaultVictimeStatus();        return $localStorage.victimeStatus;    }     /**      * @memberof Parametres      * @func addVictimeStatus      */    this.addVictimeStatus = function(newStatus) {        if($localStorage.victimeStatus) {            $localStorage.victimeStatus.push(newStatus);            $rootScope.$broadcast('victimesUpdated');        } else {            console.log("$localStorage.victimeStatus n'est pas iniatilisé.");        }    }     /**      * @memberof Parametres      * @func removeVictimeStatus      */    this.removeVictimeStatus = function(status) {        var index = $localStorage.victimeStatus.indexOf(status);        if(index == -1) console.log("Ce statut n'existe pas dans la liste des statuts.");        else {            $localStorage.victimeStatus.splice(index, 1);            $rootScope.$broadcast('victimesUpdated');        }       }     /**      * @memberof Parametres      * @func createDefaultVictimeStatus      */    this.createDefaultVictimeStatus = function() {        $localStorage.victimeStatus = [            {libelle: 'Inconnu', code: '?', bg: '#fff', text: '#333'},            {libelle: 'Indemne', code: 'I', bg: '#DCDDDE', text: '#333'},            {libelle: 'Urgence relative', code: 'UR', bg: '#fffd36', text: '#000'},            {libelle: 'Urgence absolue', code: 'UA', bg: '#b30000', text: '#fff'},            {libelle: 'Décédée', code: 'DCD', bg: '#000', text: '#fff'}        ];    }     /**      * @memberof Parametres      * @func defaultStatus      */    this.defaultStatus = function() {        if(!$localStorage.victimeStatus){            this.createDefaultVictimeStatus();        }        return $localStorage.victimeStatus[0];    }    /***************************     * SITUATIONS DES VICTIMES *     **************************/      /**      * @memberof Parametres      * @func getVictimeSituations      */    this.getVictimeSituations = function() {        if(!$localStorage.victimeSituations) this.createDefaultVictimeSituations();        return $localStorage.victimeSituations;    }     /**      * @memberof Parametres      * @func addVictimeSituation      */    this.addVictimeSituation = function(newSituation) {        if($localStorage.victimeSituations) {            $localStorage.victimeSituations.push(newSituation);            $rootScope.$broadcast('victimesUpdated');        } else {            console.log("$localStorage.victimeSituation n'est pas iniatilisé.");        }    }     /**      * @memberof Parametres      * @func removeVictimeSituation      */    this.removeVictimeSituation = function(situation) {        var index = $localStorage.victimeSituations.indexOf(situation);        if(index == -1) console.log("Cette situation n'existe pas dans la liste des situations.");        else {            $localStorage.victimeSituations.splice(index, 1);            $rootScope.$broadcast('victimesUpdated');        }       }     /**      * @memberof Parametres      * @func createDefaultVictimeSituations      */    this.createDefaultVictimeSituations = function() {        $localStorage.victimeSituations = [            'Inconnue',            'Impliquée',            'Ensevelie',            'Désensevelie',            'Évacuée'        ];    }     /**      * @memberof Parametres      * @func defaultSituation      */    this.defaultSituation = function() {        return 'Inconnue';    }    /************************     *    CORPS DE METIER   *     ***********************/      /**      * @memberof Parametres      * @func getMetiers      */    this.getMetiers = function() {        if(!$localStorage.metiers) this.createDefaultMetiers();        return $localStorage.metiers;    }     /**      * @memberof Parametres      * @func getMetier      */    this.getMetier = function(lib) {        if(!$localStorage.metiers) this.createDefaultMetiers();        for (var i = 0; i &lt; $localStorage.metiers.length; i++) {            if($localStorage.metiers[i].libelle == lib) return $localStorage.metiers[i];        }        return null;    }     /**      * @memberof Parametres      * @func addMetier      */    this.addMetier = function(metier) {        if($localStorage.metiers) {            $localStorage.metiers.push(metier);            $rootScope.$broadcast('metiersUpdated');        } else {            console.log("$localStorage.metiers n'est pas iniatilisé.");        }    }     /**      * @memberof Parametres      * @func modifyMetier      */    this.modifyMetier = function(metier) {        var i = 0;        var metiers = $localStorage.metiers;        while(i &lt; metiers.length && metiers[i].libelle != metier.libelle) {            i++;        }        if(metiers[i].libelle == metier.libelle) {            $localStorage.metiers[i].bg = metier.bg;        }    }     /**      * @memberof Parametres      * @func removeMetier      */    this.removeMetier = function(metier) {        var index = $localStorage.metiers.indexOf(metier);        if(index == -1) console.log("Ce métier n'existe pas dans la liste des métiers.");        else {            $localStorage.metiers.splice(index, 1);            $rootScope.$broadcast('metiersUpdated');        }           }     /**      * @memberof Parametres      * @func createDefaultMetiers      */    this.createDefaultMetiers = function() {        $localStorage.metiers = [            {libelle: 'CRS', bg: '#b3ccff', text: '#000'},            {libelle: 'Pisteur', bg: '#8b4ca0', text: '#fff'},            {libelle: 'Moniteur', bg: '#ffdb4d', text: '#000'},            {libelle: 'Gendarme', bg: '#001a66', text: '#fff'},            {libelle: 'Pompier', bg: '#b30000', text: '#fff'},            {libelle: 'Secouriste', bg: '#54a754', text: '#fff'}        ];    }    /*****************    *    LANGUES   *    ****************/     this.createDefaultLanguages = function(){        $localStorage.languages = [ {code:'fr', intitule:'Français'}, {code:'en', intitule: 'English' }];    }    this.getCurrentLanguage = function(){        if(!$localStorage.language) {            this.setLanguage(this.getLanguages()[0]);        }        return $localStorage.language;    }    this.getLanguages = function(){        if (!$localStorage.languages) this.createDefaultLanguages();        return $localStorage.languages;    }    this.setLanguage = function(language){        $localStorage.language = language;        $rootScope.$broadcast('langUpdated');    }    /*****************     *    MISSIONS   *     ****************/     this.getMissions = function() {        if(!$localStorage.missions) this.createDefaultMissions();        return $localStorage.missions;    }    this.createDefaultMissions = function() {        $localStorage.missions = [            'Recherche Chien',            'Recherche DVA',            'Recherche RECCO',            'DSM',            'COS CRS',            'COS pisteur',            'COS PGHM',            'COS pompier',            'Constatation judiciaire',            'Secrétaire',            'Pelletage',            'Sondage',            'Evacuation victime',            'Prise en charge victime',            'Balisage avalanche',            'Guetteur',            'Médicalisation',            '-- Autre --'        ];    }});</code></pre>        </article>        <!-- index.html -->        <!-- class files -->      </div>      <footer style="clear:both">        Documentation generated by        <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.2</a>        using        <a href="https://github.com/allenhwkim/angular-jsdoc">Angular-JSDoc template</a>      </footer>    </div>    <script src="js/prettify.js"></script>    <script src="js/angular.min.js"></script>    <script src="js/site.js"></script>    <!--%= prettyJson %-->    <script>      prettyPrint();      var lineNo = window.location.hash.match(/#line([0-9]+)$/);      lineNo && document.querySelector("ol li:nth-child("+(lineNo[1])+")").scrollIntoView();    </script>  </body></html>